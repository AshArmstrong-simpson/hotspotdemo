<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simpson Associates | Hotspot Policing & Demand Forecasting</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
:root{
    --navy:#0B1120;--navy-2:#111B30;--navy-3:#192545;
    --blue:#2563EB;--blue-d:#1D4ED8;--blue-l:#60A5FA;
    --teal:#0D9488;--teal-l:#2DD4BF;
    --purple:#8B5CF6;--red:#EF4444;--orange:#F97316;--amber:#EAB308;--green:#22C55E;
    --g50:#F8FAFC;--g100:#F1F5F9;--g200:#E2E8F0;--g300:#CBD5E1;
    --g400:#94A3B8;--g500:#64748B;--g600:#475569;--g700:#334155;--g800:#1E293B;--g900:#0F172A;
    --radius:14px;
    --shadow:0 1px 3px rgba(0,0,0,.08),0 4px 12px rgba(0,0,0,.06);
    --shadow-lg:0 8px 30px rgba(0,0,0,.12);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:var(--g50);color:var(--g900);line-height:1.5;overflow-x:hidden}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header{background:var(--navy);padding:.75rem 2rem;position:fixed;width:100%;top:0;z-index:2000;border-bottom:1px solid rgba(255,255,255,.08)}
.hdr{max-width:1440px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
.logo{display:flex;align-items:center;gap:.6rem;text-decoration:none}
.logo-mark{width:36px;height:36px;background:linear-gradient(135deg,var(--blue),var(--teal));border-radius:8px;display:grid;place-items:center}
.logo-mark svg{width:20px;height:20px}
.logo-name{font-weight:700;font-size:1.15rem;color:#fff;letter-spacing:-.02em}
.logo-name em{font-style:normal;color:var(--teal-l)}

/* Top nav tabs */
.top-nav{display:flex;gap:.25rem;background:rgba(255,255,255,.06);border-radius:10px;padding:3px}
.top-tab{padding:.55rem 1.2rem;border:none;background:0;color:var(--g400);font-weight:500;font-size:.875rem;border-radius:8px;cursor:pointer;transition:.2s;font-family:inherit}
.top-tab:hover{color:#fff;background:rgba(255,255,255,.06)}
.top-tab.active{color:#fff;background:var(--blue)}

.demo-tag{font-size:.7rem;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:var(--teal-l);border:1px solid rgba(45,212,191,.3);padding:.35rem .85rem;border-radius:20px}

/* ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ */
.page{display:none}
.page.active{display:block}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero{background:var(--navy);padding:7rem 2rem 3.5rem;position:relative;overflow:hidden}
.hero::after{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 70% 50%,rgba(37,99,235,.12) 0%,transparent 60%)}
.hero-inner{max-width:1440px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:4rem;align-items:center;position:relative;z-index:1}
.hero h1{font-size:3.2rem;font-weight:800;color:#fff;line-height:1.08;letter-spacing:-.03em;margin-bottom:1.2rem}
.hero h1 span{background:linear-gradient(135deg,var(--blue-l),var(--teal-l));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--g400);font-size:1.15rem;margin-bottom:2rem;max-width:520px}
.hero-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
.h-stat{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1.1rem;text-align:center}
.h-stat .val{font-family:'JetBrains Mono',monospace;font-size:1.6rem;font-weight:700;color:var(--teal-l)}
.h-stat .lbl{color:var(--g400);font-size:.78rem;margin-top:.15rem}

/* Hero map preview */
.hero-map-wrap{background:var(--navy-2);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:1rem;position:relative}
.hero-map-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid rgba(255,255,255,.08)}
.hero-map-bar h3{color:#fff;font-size:.95rem;font-weight:600}
.live{display:flex;align-items:center;gap:.4rem;color:var(--green);font-size:.78rem;font-weight:500}
.live-dot{width:7px;height:7px;background:var(--green);border-radius:50%;animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}
.hero-map-box{height:300px;border-radius:10px;overflow:hidden}
.hero-map-box .leaflet-container{height:100%;width:100%;border-radius:10px}

/* ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ */
main{max-width:1440px;margin:0 auto;padding:2rem}

/* Dashboard sub-nav */
.dash-nav{display:flex;gap:.35rem;background:#fff;padding:.35rem;border-radius:12px;box-shadow:var(--shadow);margin-bottom:1.75rem;overflow-x:auto}
.d-tab{padding:.65rem 1.3rem;border:none;background:0;color:var(--g600);font-weight:500;font-size:.875rem;border-radius:9px;cursor:pointer;transition:.2s;white-space:nowrap;font-family:inherit}
.d-tab:hover{background:var(--g100)}
.d-tab.active{background:var(--blue);color:#fff}

.panel{display:none}
.panel.active{display:block;animation:fadeUp .35s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* ‚îÄ‚îÄ KPIs ‚îÄ‚îÄ */
.kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:1.25rem;margin-bottom:1.5rem}
.kpi{background:#fff;border-radius:var(--radius);padding:1.4rem;box-shadow:var(--shadow);border-top:3px solid var(--g200);position:relative}
.kpi.c-blue{border-top-color:var(--blue)}.kpi.c-teal{border-top-color:var(--teal)}.kpi.c-purple{border-top-color:var(--purple)}.kpi.c-amber{border-top-color:var(--amber)}
.kpi-val{font-family:'JetBrains Mono',monospace;font-size:1.85rem;font-weight:700;letter-spacing:-.02em}
.kpi-lbl{color:var(--g500);font-size:.88rem;margin-top:.15rem}
.kpi-trend{font-size:.82rem;font-weight:500;margin-top:.65rem;display:flex;align-items:center;gap:.3rem}
.kpi-trend.up{color:var(--red)}.kpi-trend.down{color:var(--green)}

/* ‚îÄ‚îÄ GRID ‚îÄ‚îÄ */
.grid12{display:grid;grid-template-columns:repeat(12,1fr);gap:1.5rem}
.card{background:#fff;border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow)}
.c-hdr{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.25rem}
.c-title{font-weight:600;font-size:1rem}.c-sub{color:var(--g500);font-size:.82rem;margin-top:.15rem}
.badge{padding:.2rem .65rem;border-radius:16px;font-size:.72rem;font-weight:600}
.b-info{background:rgba(37,99,235,.1);color:var(--blue)}.b-ok{background:rgba(34,197,94,.1);color:var(--green)}
.b-warn{background:rgba(234,179,8,.1);color:var(--amber)}.b-err{background:rgba(239,68,68,.1);color:var(--red)}
.span6{grid-column:span 6}.span8{grid-column:span 8}.span4{grid-column:span 4}.span12{grid-column:span 12}
.chart-box{height:280px;position:relative}

/* ‚îÄ‚îÄ FILTERS ‚îÄ‚îÄ */
.filters{display:flex;gap:.75rem;margin-bottom:1.5rem;flex-wrap:wrap;align-items:center}
.filters label{font-size:.85rem;color:var(--g600);font-weight:500}
.fsel{padding:.5rem 2rem .5rem .7rem;border:1px solid var(--g300);border-radius:8px;font-size:.88rem;color:var(--g700);background:#fff;font-family:inherit;cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
.fsel:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(37,99,235,.12)}

/* ‚îÄ‚îÄ MAP ‚îÄ‚îÄ */
.map-wrap{height:450px;border-radius:12px;overflow:hidden;position:relative}
.map-wrap .leaflet-container{height:100%;width:100%}
.map-legend{position:absolute;bottom:1rem;left:1rem;background:#fff;padding:.85rem 1rem;border-radius:10px;box-shadow:var(--shadow-lg);z-index:800;font-size:.8rem}
.map-legend h4{font-size:.7rem;font-weight:600;color:var(--g500);text-transform:uppercase;letter-spacing:.04em;margin-bottom:.5rem}
.leg-item{display:flex;align-items:center;gap:.45rem;margin-bottom:.35rem}
.leg-dot{width:11px;height:11px;border-radius:50%}
.leg-dot.crit{background:var(--red)}.leg-dot.high{background:var(--orange)}.leg-dot.med{background:var(--amber)}.leg-dot.low{background:var(--green)}

/* ‚îÄ‚îÄ HOTSPOT LIST ‚îÄ‚îÄ */
.hs-list{display:flex;flex-direction:column;gap:.6rem;max-height:400px;overflow-y:auto}
.hs-item{display:flex;align-items:center;gap:.85rem;padding:.9rem;background:var(--g50);border-radius:12px;cursor:pointer;transition:.2s;border:1px solid transparent}
.hs-item:hover{background:#fff;border-color:var(--g200);box-shadow:var(--shadow)}
.hs-rank{width:30px;height:30px;border-radius:8px;display:grid;place-items:center;font-weight:700;font-size:.85rem}
.hs-item.crit .hs-rank{background:rgba(239,68,68,.1);color:var(--red)}
.hs-item.high .hs-rank{background:rgba(249,115,22,.1);color:var(--orange)}
.hs-item.med .hs-rank{background:rgba(234,179,8,.1);color:var(--amber)}
.hs-info{flex:1}.hs-name{font-weight:600;font-size:.88rem}.hs-meta{font-size:.78rem;color:var(--g500);margin-top:.1rem}
.hs-score{text-align:right}
.hs-score .num{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:1.2rem}
.hs-item.crit .num{color:var(--red)}.hs-item.high .num{color:var(--orange)}.hs-item.med .num{color:var(--amber)}
.hs-score .slbl{font-size:.65rem;color:var(--g500);text-transform:uppercase;letter-spacing:.04em}

/* ‚îÄ‚îÄ FORECAST DAYS ‚îÄ‚îÄ */
.fc-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:.85rem;margin-top:1rem}
.fc-day{text-align:center;padding:1rem .5rem;background:var(--g50);border-radius:12px;cursor:pointer;transition:.2s}
.fc-day:hover{background:#fff;box-shadow:var(--shadow);transform:translateY(-2px)}
.fc-day.today{background:var(--blue);color:#fff}
.fc-day .dn{font-size:.72rem;font-weight:500;text-transform:uppercase;color:var(--g500);letter-spacing:.04em}
.fc-day .dd{font-size:.82rem;color:var(--g600);margin:.15rem 0 .6rem}
.fc-day.today .dn,.fc-day.today .dd{color:rgba(255,255,255,.75)}
.fc-day .fv{font-family:'JetBrains Mono',monospace;font-size:1.35rem;font-weight:700}
.fc-day.today .fv{color:#fff}
.fc-day .fl{font-size:.68rem;color:var(--g500)}
.fc-day.today .fl{color:rgba(255,255,255,.7)}

/* ‚îÄ‚îÄ RESOURCES ‚îÄ‚îÄ */
.res-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
.res-card{padding:1.2rem;background:var(--g50);border-radius:12px;text-align:center}
.res-name{font-weight:600;font-size:.88rem;color:var(--g800);margin-bottom:.3rem}
.res-val{font-family:'JetBrains Mono',monospace;font-size:1.7rem;font-weight:700;color:var(--blue)}
.res-status{font-size:.78rem;color:var(--g500)}

/* ‚îÄ‚îÄ PEEL ‚îÄ‚îÄ */
.peel-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}
.peel{background:#fff;border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow);border-top:3px solid var(--g200)}
.peel.eff{border-top-color:var(--blue)}.peel.effi{border-top-color:var(--teal)}.peel.leg{border-top-color:var(--purple)}
.peel-hdr{display:flex;align-items:center;gap:.6rem;margin-bottom:1.2rem}
.peel-ico{width:36px;height:36px;border-radius:9px;display:grid;place-items:center}
.peel.eff .peel-ico{background:rgba(37,99,235,.1)}.peel.effi .peel-ico{background:rgba(13,148,136,.1)}.peel.leg .peel-ico{background:rgba(139,92,246,.1)}
.peel-ico svg{width:18px;height:18px}
.peel-t{font-weight:600;font-size:1rem}
.pm{display:flex;justify-content:space-between;align-items:center;padding:.7rem 0;border-bottom:1px solid var(--g100)}
.pm:last-child{border-bottom:none}
.pm-l{font-size:.88rem;color:var(--g600)}
.pm-v{font-family:'JetBrains Mono',monospace;font-weight:600;font-size:1.05rem}
.peel.eff .pm-v{color:var(--blue)}.peel.effi .pm-v{color:var(--teal)}.peel.leg .pm-v{color:var(--purple)}

/* ‚îÄ‚îÄ INSIGHT PANEL ‚îÄ‚îÄ */
.insight-wrap{background:linear-gradient(135deg,var(--navy),var(--navy-3));border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow-lg)}
.insight-wrap .c-title{color:#fff}.insight-wrap .c-sub{color:var(--g400)}
.ins-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.25rem}
.ins{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1.15rem}
.ins-pri{display:inline-block;padding:.2rem .65rem;border-radius:16px;font-size:.68rem;font-weight:600;text-transform:uppercase;letter-spacing:.04em;margin-bottom:.6rem}
.ins-pri.h{background:rgba(239,68,68,.2);color:#FCA5A5}.ins-pri.m{background:rgba(234,179,8,.2);color:#FDE68A}.ins-pri.l{background:rgba(34,197,94,.2);color:#86EFAC}
.ins-txt{color:var(--g200);font-size:.92rem;line-height:1.5}
.ins-txt strong{color:#fff}
.ins-meta{margin-top:.75rem;font-size:.78rem;color:var(--g400)}

/* ‚îÄ‚îÄ SOLUTIONS PAGE ‚îÄ‚îÄ */
.pg-hero{background:var(--navy);padding:7rem 2rem 3rem;text-align:center}
.pg-hero h1{font-size:2.8rem;font-weight:800;color:#fff;letter-spacing:-.03em;margin-bottom:.8rem}
.pg-hero p{color:var(--g400);font-size:1.1rem;max-width:640px;margin:0 auto}
.sol-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;max-width:1440px;margin:2.5rem auto;padding:0 2rem}
.sol-card{background:#fff;border-radius:var(--radius);padding:2rem;box-shadow:var(--shadow);border:1px solid var(--g200);transition:.25s}
.sol-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
.sol-ico{width:52px;height:52px;border-radius:12px;display:grid;place-items:center;margin-bottom:1.2rem}
.sol-ico svg{width:26px;height:26px}
.sol-card h3{font-size:1.1rem;font-weight:700;margin-bottom:.5rem}
.sol-card p{color:var(--g500);font-size:.92rem;line-height:1.55}

/* ‚îÄ‚îÄ CASE STUDIES PAGE ‚îÄ‚îÄ */
.cs-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem;max-width:1440px;margin:2.5rem auto;padding:0 2rem}
.cs-card{background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);border:1px solid var(--g200);transition:.25s}
.cs-card:hover{transform:translateY(-3px);box-shadow:var(--shadow-lg)}
.cs-top{height:180px;position:relative;overflow:hidden}
.cs-top img{width:100%;height:100%;object-fit:cover}
.cs-body{padding:1.5rem}
.cs-card h3{font-size:1.1rem;font-weight:700;margin-bottom:.5rem}
.cs-card p{color:var(--g500);font-size:.9rem;line-height:1.55}
.cs-tag{display:inline-block;padding:.2rem .6rem;border-radius:12px;font-size:.72rem;font-weight:600;margin-top:.75rem}

/* ‚îÄ‚îÄ CONTACT PAGE ‚îÄ‚îÄ */
.contact-grid{display:grid;grid-template-columns:1fr 1fr;gap:2.5rem;max-width:1440px;margin:2.5rem auto;padding:0 2rem}
.c-form{background:#fff;border-radius:var(--radius);padding:2rem;box-shadow:var(--shadow)}
.c-form label{display:block;font-size:.88rem;font-weight:500;color:var(--g700);margin-bottom:.35rem}
.c-form input,.c-form textarea,.c-form select{width:100%;padding:.7rem .85rem;border:1px solid var(--g300);border-radius:8px;font-family:inherit;font-size:.92rem;margin-bottom:1rem;transition:.2s}
.c-form input:focus,.c-form textarea:focus,.c-form select:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(37,99,235,.1)}
.c-form textarea{height:120px;resize:vertical}
.c-btn{background:var(--blue);color:#fff;border:none;padding:.8rem 2rem;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:.2s;font-family:inherit}
.c-btn:hover{background:var(--blue-d)}
.c-info{display:flex;flex-direction:column;gap:1.5rem}
.c-info-card{background:#fff;border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow)}
.c-info-card h3{font-size:1rem;font-weight:600;margin-bottom:.5rem}
.c-info-card p{color:var(--g500);font-size:.9rem;line-height:1.55}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
footer{background:var(--navy);padding:2rem;text-align:center;margin-top:3rem;border-top:1px solid rgba(255,255,255,.06)}
footer p{color:var(--g400);font-size:.88rem}
footer a{color:var(--teal-l);text-decoration:none}

@media(max-width:1100px){
    .hero-inner{grid-template-columns:1fr}
    .kpis{grid-template-columns:repeat(2,1fr)}
    .span6,.span8,.span4{grid-column:span 12}
    .peel-grid,.ins-grid,.sol-grid{grid-template-columns:1fr}
    .cs-grid,.contact-grid{grid-template-columns:1fr}
}
@media(max-width:700px){
    .hero h1{font-size:2rem}
    .kpis{grid-template-columns:1fr}
    .fc-grid{grid-template-columns:repeat(4,1fr)}
    .res-grid{grid-template-columns:1fr}
    .hero-stats{grid-template-columns:1fr}
    .top-nav{display:none}
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<header>
<div class="hdr">
    <a href="#" class="logo" onclick="showPage('dashboard');return false">
        <div class="logo-mark"><svg viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg></div>
        <div class="logo-name">Simpson <em>Associates</em></div>
    </a>
    <div class="top-nav">
        <button class="top-tab active" onclick="showPage('dashboard')">Dashboard</button>
        <button class="top-tab" onclick="showPage('solutions')">Solutions</button>
        <button class="top-tab" onclick="showPage('casestudies')">Case Studies</button>
        <button class="top-tab" onclick="showPage('contact')">Contact</button>
    </div>
    <div class="demo-tag">Demo Environment</div>
</div>
</header>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DASHBOARD PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page active" id="pg-dashboard">

<section class="hero">
<div class="hero-inner">
    <div class="hero-text">
        <h1>Hotspot Policing &amp; <span>Demand Forecasting</span></h1>
        <p>AI-powered crime analytics enabling evidence-led decisions, proactive resource allocation, and safer communities across UK police forces.</p>
        <div class="hero-stats">
            <div class="h-stat"><div class="val">38%</div><div class="lbl">Avg crime reduction in hotspots</div></div>
            <div class="h-stat"><div class="val">60%+</div><div class="lbl">UK forces we've partnered with</div></div>
            <div class="h-stat"><div class="val">74%</div><div class="lbl">Violence reduction on patrol days</div></div>
        </div>
    </div>
    <div class="hero-map-wrap">
        <div class="hero-map-bar">
            <h3>National Crime Hotspot Overview</h3>
            <div class="live"><div class="live-dot"></div> Real-time data</div>
        </div>
        <div class="hero-map-box"><div id="heroMap"></div></div>
    </div>
</div>
</section>

<main>
    <div class="dash-nav">
        <button class="d-tab active" data-panel="overview">üìä Overview</button>
        <button class="d-tab" data-panel="hotspots">üéØ Hotspot Analysis</button>
        <button class="d-tab" data-panel="forecast">üìà Demand Forecast</button>
        <button class="d-tab" data-panel="resources">üë• Resource Allocation</button>
        <button class="d-tab" data-panel="peel">‚öñÔ∏è PEEL Alignment</button>
        <button class="d-tab" data-panel="insights">ü§ñ AI Insights</button>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ OVERVIEW ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="panel active" id="overview">
        <div class="kpis" id="kpi-section">
            <div class="kpi c-blue"><div class="kpi-val" id="kpi-incidents">2,847</div><div class="kpi-lbl">Active Incidents (24h)</div><div class="kpi-trend up">‚Üó +12% from last week</div></div>
            <div class="kpi c-teal"><div class="kpi-val" id="kpi-hotspots">47</div><div class="kpi-lbl">Active Hotspots</div><div class="kpi-trend down">‚Üò -8% from last month</div></div>
            <div class="kpi c-purple"><div class="kpi-val" id="kpi-officers">1,284</div><div class="kpi-lbl">Officers Deployed</div><div class="kpi-trend down">94% allocation efficiency</div></div>
            <div class="kpi c-amber"><div class="kpi-val" id="kpi-accuracy">76.4%</div><div class="kpi-lbl">Prediction Accuracy</div><div class="kpi-trend down">‚Üó +3.2% improvement</div></div>
        </div>
        <div class="grid12">
            <div class="card span6"><div class="c-hdr"><div><div class="c-title">Crime Trends (12 Months)</div><div class="c-sub">Monthly incident counts by category</div></div><span class="badge b-info">Synthetic Data</span></div><div class="chart-box"><canvas id="trendChart"></canvas></div></div>
            <div class="card span6"><div class="c-hdr"><div><div class="c-title">Hotspot Risk Distribution</div><div class="c-sub">Current risk levels across all hotspots</div></div></div><div class="chart-box"><canvas id="riskChart"></canvas></div></div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ HOTSPOT ANALYSIS ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="panel" id="hotspots">
        <div class="filters">
            <label>Force Area:</label>
            <select class="fsel" id="filterForce">
                <option value="all">All Forces</option>
                <option value="gmp">Greater Manchester</option>
                <option value="wmp">West Midlands</option>
                <option value="met">Metropolitan</option>
                <option value="mers">Merseyside</option>
                <option value="wyp">West Yorkshire</option>
                <option value="swp">South Wales</option>
            </select>
            <label>Crime Type:</label>
            <select class="fsel" id="filterCrime">
                <option value="all">All Crime Types</option>
                <option value="violence">Violence</option>
                <option value="asb">ASB</option>
                <option value="burglary">Burglary</option>
                <option value="drugs">Drug Offences</option>
                <option value="vehicle">Vehicle Crime</option>
            </select>
            <label>Time Period:</label>
            <select class="fsel" id="filterPeriod">
                <option value="7">Last 7 Days</option>
                <option value="28">Last 28 Days</option>
                <option value="90">Last 90 Days</option>
            </select>
        </div>
        <div class="grid12">
            <div class="card span8">
                <div class="c-hdr"><div><div class="c-title" id="mapTitle">Interactive Hotspot Map</div><div class="c-sub" id="mapSub">Real-time crime concentration with geofenced hexagon grid</div></div><span class="badge b-ok">Live</span></div>
                <div class="map-wrap" id="mainMapWrap">
                    <div id="mainMap" style="height:100%;width:100%"></div>
                    <div class="map-legend">
                        <h4>Risk Level</h4>
                        <div class="leg-item"><div class="leg-dot crit"></div>Critical (80-100)</div>
                        <div class="leg-item"><div class="leg-dot high"></div>High (60-79)</div>
                        <div class="leg-item"><div class="leg-dot med"></div>Medium (40-59)</div>
                        <div class="leg-item"><div class="leg-dot low"></div>Low (0-39)</div>
                    </div>
                </div>
            </div>
            <div class="card span4">
                <div class="c-hdr"><div><div class="c-title">Priority Hotspots</div><div class="c-sub" id="hsListSub">Ranked by composite risk score</div></div></div>
                <div class="hs-list" id="hsList"></div>
            </div>
            <div class="card span12">
                <div class="c-hdr"><div><div class="c-title">Temporal Crime Patterns</div><div class="c-sub">Identifying "hot times" for targeted patrol deployment</div></div></div>
                <div class="chart-box" style="height:200px"><canvas id="temporalChart"></canvas></div>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ DEMAND FORECAST ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="panel" id="forecast">
        <div class="grid12">
            <div class="card span12">
                <div class="c-hdr"><div><div class="c-title">7-Day Demand Forecast</div><div class="c-sub">Predicted incident volumes from ML analysis of historical patterns</div></div><span class="badge b-info">76.4% Accuracy</span></div>
                <div class="fc-grid">
                    <div class="fc-day today"><div class="dn">Today</div><div class="dd">Thu 5 Feb</div><div class="fv">847</div><div class="fl">predicted calls</div></div>
                    <div class="fc-day"><div class="dn">Friday</div><div class="dd">6 Feb</div><div class="fv" style="color:var(--red)">1,124</div><div class="fl">+33% vs avg</div></div>
                    <div class="fc-day"><div class="dn">Saturday</div><div class="dd">7 Feb</div><div class="fv" style="color:var(--red)">1,289</div><div class="fl">+52% vs avg</div></div>
                    <div class="fc-day"><div class="dn">Sunday</div><div class="dd">8 Feb</div><div class="fv" style="color:var(--orange)">923</div><div class="fl">+9% vs avg</div></div>
                    <div class="fc-day"><div class="dn">Monday</div><div class="dd">9 Feb</div><div class="fv" style="color:var(--green)">712</div><div class="fl">-16% vs avg</div></div>
                    <div class="fc-day"><div class="dn">Tuesday</div><div class="dd">10 Feb</div><div class="fv" style="color:var(--green)">698</div><div class="fl">-18% vs avg</div></div>
                    <div class="fc-day"><div class="dn">Wednesday</div><div class="dd">11 Feb</div><div class="fv" style="color:var(--amber)">756</div><div class="fl">-11% vs avg</div></div>
                </div>
            </div>
            <div class="card span6"><div class="c-hdr"><div><div class="c-title">Demand Trend Forecast</div><div class="c-sub">Historical actuals vs predicted</div></div></div><div class="chart-box"><canvas id="forecastChart"></canvas></div></div>
            <div class="card span6"><div class="c-hdr"><div><div class="c-title">Crime Type Predictions</div><div class="c-sub">Next 7-day forecast by category</div></div></div><div class="chart-box"><canvas id="categoryChart"></canvas></div></div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ RESOURCES ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="panel" id="resources">
        <div class="grid12">
            <div class="card span12">
                <div class="c-hdr"><div><div class="c-title">Recommended Resource Deployment</div><div class="c-sub">AI-optimised allocation based on predicted demand</div></div></div>
                <div class="res-grid">
                    <div class="res-card"><div class="res-name">Foot Patrol Officers</div><div class="res-val">186</div><div class="res-status">Recommended for hotspots</div></div>
                    <div class="res-card"><div class="res-name">Response Vehicles</div><div class="res-val">42</div><div class="res-status">Mobile coverage</div></div>
                    <div class="res-card"><div class="res-name">PCSOs</div><div class="res-val">94</div><div class="res-status">Community presence</div></div>
                    <div class="res-card"><div class="res-name">Control Room Staff</div><div class="res-val">28</div><div class="res-status">Dispatch capacity</div></div>
                    <div class="res-card"><div class="res-name">Specialist Units</div><div class="res-val">16</div><div class="res-status">On standby</div></div>
                    <div class="res-card"><div class="res-name">Special Constables</div><div class="res-val">45</div><div class="res-status">Weekend support</div></div>
                </div>
            </div>
            <div class="card span6"><div class="c-hdr"><div><div class="c-title">Shift Coverage Analysis</div><div class="c-sub">Predicted demand vs staffing</div></div></div><div class="chart-box"><canvas id="shiftChart"></canvas></div></div>
            <div class="card span6"><div class="c-hdr"><div><div class="c-title">Resource Efficiency</div><div class="c-sub">Deployment optimisation metrics</div></div></div><div class="chart-box"><canvas id="effChart"></canvas></div></div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ PEEL ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="panel" id="peel">
        <div class="peel-grid">
            <div class="peel eff">
                <div class="peel-hdr"><div class="peel-ico"><svg viewBox="0 0 24 24" fill="none" stroke="var(--blue)" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div><div class="peel-t">Effectiveness</div></div>
                <div class="pm"><span class="pm-l">Crime Reduction</span><span class="pm-v">-18.7%</span></div>
                <div class="pm"><span class="pm-l">Repeat Victim Prevention</span><span class="pm-v">72%</span></div>
                <div class="pm"><span class="pm-l">Serious Violence</span><span class="pm-v">-23.4%</span></div>
                <div class="pm"><span class="pm-l">Positive Outcomes</span><span class="pm-v">+12%</span></div>
            </div>
            <div class="peel effi">
                <div class="peel-hdr"><div class="peel-ico"><svg viewBox="0 0 24 24" fill="none" stroke="var(--teal)" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><div class="peel-t">Efficiency</div></div>
                <div class="pm"><span class="pm-l">Resource Utilisation</span><span class="pm-v">94%</span></div>
                <div class="pm"><span class="pm-l">Response Time</span><span class="pm-v">8.2 min</span></div>
                <div class="pm"><span class="pm-l">Cost per Incident</span><span class="pm-v">-15%</span></div>
                <div class="pm"><span class="pm-l">Patrol Compliance</span><span class="pm-v">98%</span></div>
            </div>
            <div class="peel leg">
                <div class="peel-hdr"><div class="peel-ico"><svg viewBox="0 0 24 24" fill="none" stroke="var(--purple)" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg></div><div class="peel-t">Legitimacy</div></div>
                <div class="pm"><span class="pm-l">Public Confidence</span><span class="pm-v">78%</span></div>
                <div class="pm"><span class="pm-l">Stop & Search Fairness</span><span class="pm-v">Balanced</span></div>
                <div class="pm"><span class="pm-l">Complaints Trend</span><span class="pm-v">-22%</span></div>
                <div class="pm"><span class="pm-l">Victim Satisfaction</span><span class="pm-v">84%</span></div>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ AI INSIGHTS ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="panel" id="insights">
        <div class="insight-wrap">
            <div class="c-hdr"><div><div class="c-title">ü§ñ AI-Generated Insights</div><div class="c-sub">Automated pattern detection and actionable recommendations</div></div></div>
            <div class="ins-grid">
                <div class="ins"><div class="ins-pri h">High Priority</div><div class="ins-txt"><strong>NTE Violence Surge Predicted:</strong> Friday evening shows 47% higher violence risk in Manchester City Centre. Recommend 12 additional officers 22:00‚Äì03:00.</div><div class="ins-meta">2 hours ago ¬∑ Confidence: 87%</div></div>
                <div class="ins"><div class="ins-pri h">High Priority</div><div class="ins-txt"><strong>Emerging Burglary Pattern:</strong> Cluster of 8 residential burglaries in LS8 postcode. Similar MO suggests linked series. Consider covert surveillance.</div><div class="ins-meta">4 hours ago ¬∑ Confidence: 82%</div></div>
                <div class="ins"><div class="ins-pri m">Medium Priority</div><div class="ins-txt"><strong>Football Match Impact:</strong> Saturday fixture at Etihad Stadium. Historical data suggests +23% ASB within 2km. Pre-position from 14:00.</div><div class="ins-meta">6 hours ago ¬∑ Confidence: 91%</div></div>
                <div class="ins"><div class="ins-pri m">Medium Priority</div><div class="ins-txt"><strong>Drug Hotspot Shift:</strong> Activity migrating from B21 to B19 postcodes after recent enforcement. Update patrol routes.</div><div class="ins-meta">8 hours ago ¬∑ Confidence: 76%</div></div>
                <div class="ins"><div class="ins-pri l">Low Priority</div><div class="ins-txt"><strong>Seasonal Trend:</strong> Vehicle crime typically rises 15% in February evenings. Increase car park patrols during evening rush.</div><div class="ins-meta">12 hours ago ¬∑ Confidence: 94%</div></div>
                <div class="ins"><div class="ins-pri l">Low Priority</div><div class="ins-txt"><strong>Patrol Optimisation:</strong> Analysis shows 15-minute hotspot patrols yield 38% better deterrence than 10-minute visits.</div><div class="ins-meta">1 day ago ¬∑ Confidence: 89%</div></div>
            </div>
        </div>
    </div>
</main>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOLUTIONS PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="pg-solutions">
<div class="pg-hero"><h1>Our Policing Solutions</h1><p>Purpose-built analytics and AI solutions for UK police forces, designed to accelerate data maturity and deliver measurable operational impact.</p></div>
<div class="sol-grid">
    <div class="sol-card"><div class="sol-ico" style="background:rgba(37,99,235,.1)"><svg viewBox="0 0 24 24" fill="none" stroke="var(--blue)" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></div><h3>Hotspot Policing Analytics</h3><p>Geospatial crime analysis with hexagonal grid mapping, temporal pattern detection, and risk-scored hotspot prioritisation for targeted patrol deployment.</p></div>
    <div class="sol-card"><div class="sol-ico" style="background:rgba(13,148,136,.1)"><svg viewBox="0 0 24 24" fill="none" stroke="var(--teal)" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div><h3>Demand Forecasting</h3><p>ML-driven predictions of incident volumes by crime type, time, and location. Incorporates seasonality, events, weather, and NTE patterns to optimise resourcing.</p></div>
    <div class="sol-card"><div class="sol-ico" style="background:rgba(139,92,246,.1)"><svg viewBox="0 0 24 24" fill="none" stroke="var(--purple)" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/></svg></div><h3>Resource Allocation Engine</h3><p>AI-optimised deployment recommendations for officers, PCSOs, and specialist units. Matches staffing to predicted demand by shift, location, and risk level.</p></div>
    <div class="sol-card"><div class="sol-ico" style="background:rgba(234,179,8,.1)"><svg viewBox="0 0 24 24" fill="none" stroke="var(--amber)" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg></div><h3>Data Analytics Accelerator</h3><p>Pre-configured analytics platform for policing. Get started quickly with tools and workflows designed for incident reporting, performance dashboards, and data sharing.</p></div>
    <div class="sol-card"><div class="sol-ico" style="background:rgba(239,68,68,.1)"><svg viewBox="0 0 24 24" fill="none" stroke="var(--red)" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></div><h3>RedactXpert</h3><p>AI-powered auto-redaction tool using Microsoft Cognitive Services. Automatically detects and redacts PII from documents, saving officers hours per document.</p></div>
    <div class="sol-card"><div class="sol-ico" style="background:rgba(34,197,94,.1)"><svg viewBox="0 0 24 24" fill="none" stroke="var(--green)" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div><h3>PEEL Performance Framework</h3><p>Analytics aligned to HMICFRS inspection criteria. Track effectiveness, efficiency, and legitimacy metrics with auditable, explainable AI-driven insights.</p></div>
</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CASE STUDIES PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="pg-casestudies">
<div class="pg-hero"><h1>Case Studies</h1><p>See how UK police forces are transforming their operations with Simpson Associates' data analytics and AI solutions.</p></div>
<div class="cs-grid">
    <div class="cs-card"><div class="cs-top" style="background:linear-gradient(135deg,var(--blue),var(--teal))"></div><div class="cs-body"><h3>Derbyshire Constabulary: Data Analytics Transformation</h3><p>Partnered to build a unified data platform enabling self-sufficient analytics capability. Delivered knowledge transfer ensuring force ownership of the solution post-project.</p><span class="cs-tag badge b-info">Data Platform</span></div></div>
    <div class="cs-card"><div class="cs-top" style="background:linear-gradient(135deg,var(--purple),var(--blue))"></div><div class="cs-body"><h3>South Wales & Gwent Police: Joint Data Analytics Programme</h3><p>Selected as delivery partner for the JDAP initiative, revolutionising intelligence-led policing, resource allocation, and public safety through data-driven insights.</p><span class="cs-tag badge b-ok">Intelligence Led</span></div></div>
    <div class="cs-card"><div class="cs-top" style="background:linear-gradient(135deg,var(--red),var(--orange))"></div><div class="cs-body"><h3>Cleveland Police: AI-Powered Redaction</h3><p>Deployed RedactXpert¬Æ achieving 50% reduction in redaction processing time. AI-powered auto-detection of PII across documents, saving officers significant time.</p><span class="cs-tag badge b-err">AI Redaction</span></div></div>
    <div class="cs-card"><div class="cs-top" style="background:linear-gradient(135deg,var(--teal),var(--green))"></div><div class="cs-body"><h3>TOEX Capabilities Environment: National Rollout</h3><p>Key delivery partner for the Tackling Organised Exploitation programme, now approved for nationwide funding by the Home Office, making investigative tools available to all forces.</p><span class="cs-tag badge b-warn">National</span></div></div>
</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONTACT PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="pg-contact">
<div class="pg-hero"><h1>Get In Touch</h1><p>Discover how we can transform your force's data into actionable insight. Book a demo or speak to our policing team.</p></div>
<div class="contact-grid">
    <div class="c-form">
        <h3 style="margin-bottom:1.2rem;font-size:1.15rem">Book a Demo</h3>
        <label>Name</label><input type="text" placeholder="Your name">
        <label>Email</label><input type="email" placeholder="your.email@force.police.uk">
        <label>Force / Organisation</label><select><option>Select your force</option><option>Avon and Somerset</option><option>Bedfordshire</option><option>Cambridgeshire</option><option>Cheshire</option><option>City of London</option><option>Cleveland</option><option>Cumbria</option><option>Derbyshire</option><option>Devon and Cornwall</option><option>Dorset</option><option>Durham</option><option>Essex</option><option>Gloucestershire</option><option>Greater Manchester</option><option>Hampshire</option><option>Hertfordshire</option><option>Humberside</option><option>Kent</option><option>Lancashire</option><option>Leicestershire</option><option>Lincolnshire</option><option>Merseyside</option><option>Metropolitan</option><option>Norfolk</option><option>Northamptonshire</option><option>Northumbria</option><option>North Wales</option><option>North Yorkshire</option><option>Nottinghamshire</option><option>South Wales</option><option>South Yorkshire</option><option>Staffordshire</option><option>Suffolk</option><option>Surrey</option><option>Sussex</option><option>Thames Valley</option><option>Warwickshire</option><option>West Mercia</option><option>West Midlands</option><option>West Yorkshire</option><option>Wiltshire</option></select>
        <label>Message</label><textarea placeholder="Tell us about your challenges or what you'd like to see in a demo..."></textarea>
        <button class="c-btn" onclick="alert('Thank you! Our policing team will be in touch shortly.')">Request Demo</button>
    </div>
    <div class="c-info">
        <div class="c-info-card"><h3>üìç York Office</h3><p>Suite 3, 20 George Hudson Street, York YO1 6WR</p></div>
        <div class="c-info-card"><h3>üìç Sheffield Office</h3><p>3 Concourse Way, Sheffield City Centre, Sheffield S1 2BJ</p></div>
        <div class="c-info-card"><h3>üìû Phone</h3><p>+44 (0) 1904 234 510</p></div>
        <div class="c-info-card"><h3>üåê Website</h3><p><a href="https://www.simpson-associates.co.uk" target="_blank" style="color:var(--blue)">www.simpson-associates.co.uk</a></p></div>
        <div class="c-info-card"><h3>üèÜ Accreditations</h3><p>Microsoft Partner of the Year 2024 ¬∑ ISO 27001 ¬∑ ISO 9001 ¬∑ Cyber Essentials Plus ¬∑ Databricks Partner ¬∑ Police Industry Charter Signatory</p></div>
    </div>
</div>
</div>

<footer><p><strong>Simpson Associates</strong> ‚Äî Data Transformation Partner to UK Police Forces<br>Demo Environment ‚Äì Synthetic Data Only | <a href="https://www.simpson-associates.co.uk">www.simpson-associates.co.uk</a></p></footer>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DATA: Synthetic force-specific crime datasets
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const FORCES = {
    all: {
        name: 'All Forces', center: [53.0, -1.5], zoom: 6,
        hotspots: [
            {name:'Manchester City Centre', lat:53.4808, lng:-2.2426, risk:94, level:'crit', types:'Violence, ASB', context:'NTE peak hours', area:0.18},
            {name:'Birmingham New Street', lat:52.4862, lng:-1.8904, risk:89, level:'crit', types:'Robbery, Theft', context:'Transport hub', area:0.15},
            {name:'Liverpool ONE', lat:53.4010, lng:-2.9874, risk:76, level:'high', types:'Shoplifting, ASB', context:'Retail zone', area:0.22},
            {name:'Leeds City Station', lat:53.7957, lng:-1.5477, risk:71, level:'high', types:'Drug offences', context:'Transit area', area:0.12},
            {name:'Sheffield Meadowhall', lat:53.4133, lng:-1.4120, risk:58, level:'med', types:'Vehicle crime', context:'Car park', area:0.3},
            {name:'Cardiff Bay', lat:51.4637, lng:-3.1639, risk:52, level:'med', types:'ASB', context:'Weekend evenings', area:0.25},
            {name:'Brixton High Street', lat:51.4613, lng:-0.1156, risk:83, level:'crit', types:'Violence, Drugs', context:'NTE hotspot', area:0.14},
            {name:'Stratford Westfield', lat:51.5430, lng:-0.0018, risk:65, level:'high', types:'Shoplifting, ASB', context:'Shopping centre', area:0.2}
        ],
        temporal: [85,42,28,35,62,78,95,88,102,124,156,178],
        kpis: {incidents:'2,847', hotspots:'47', officers:'1,284', accuracy:'76.4%'}
    },
    gmp: {
        name: 'Greater Manchester', center: [53.48, -2.24], zoom: 12,
        hotspots: [
            {name:'Piccadilly Gardens', lat:53.4808, lng:-2.2369, risk:94, level:'crit', types:'Violence, ASB', context:'NTE peak', area:0.08},
            {name:'Deansgate / Locks', lat:53.4748, lng:-2.2507, risk:88, level:'crit', types:'Violence', context:'NTE corridor', area:0.12},
            {name:'Victoria Station', lat:53.4878, lng:-2.2421, risk:72, level:'high', types:'Theft, Robbery', context:'Transport hub', area:0.1},
            {name:'Oxford Road Corridor', lat:53.4698, lng:-2.2372, risk:68, level:'high', types:'ASB, Drugs', context:'Student area', area:0.18},
            {name:'Arndale Centre', lat:53.4838, lng:-2.2398, risk:65, level:'high', types:'Shoplifting', context:'Retail', area:0.06},
            {name:'Fallowfield', lat:53.4395, lng:-2.2224, risk:55, level:'med', types:'Burglary', context:'Residential', area:0.25}
        ],
        temporal: [92,58,32,28,55,72,85,78,95,135,172,195],
        kpis: {incidents:'487', hotspots:'12', officers:'248', accuracy:'78.1%'}
    },
    wmp: {
        name: 'West Midlands', center: [52.49, -1.89], zoom: 12,
        hotspots: [
            {name:'New Street Station', lat:52.4778, lng:-1.8991, risk:89, level:'crit', types:'Robbery, Theft', context:'Transport hub', area:0.1},
            {name:'Broad Street', lat:52.4740, lng:-1.9120, risk:85, level:'crit', types:'Violence, ASB', context:'NTE strip', area:0.14},
            {name:'Bull Ring Markets', lat:52.4772, lng:-1.8920, risk:71, level:'high', types:'Shoplifting', context:'Retail', area:0.08},
            {name:'Handsworth', lat:52.5050, lng:-1.9310, risk:67, level:'high', types:'Drugs, Violence', context:'Residential', area:0.3},
            {name:'Digbeth', lat:52.4735, lng:-1.8840, risk:58, level:'med', types:'Vehicle crime', context:'Industrial', area:0.22}
        ],
        temporal: [78,45,25,30,58,68,82,76,98,118,148,168],
        kpis: {incidents:'412', hotspots:'9', officers:'215', accuracy:'75.8%'}
    },
    met: {
        name: 'Metropolitan Police', center: [51.50, -0.12], zoom: 11,
        hotspots: [
            {name:'Brixton High Street', lat:51.4613, lng:-0.1156, risk:83, level:'crit', types:'Violence, Drugs', context:'NTE hotspot', area:0.14},
            {name:'Stratford Westfield', lat:51.5430, lng:-0.0018, risk:75, level:'high', types:'Shoplifting, ASB', context:'Shopping centre', area:0.2},
            {name:'Camden Town', lat:51.5392, lng:-0.1426, risk:72, level:'high', types:'Theft, ASB', context:'Tourism / NTE', area:0.12},
            {name:'Westminster Bridge', lat:51.5007, lng:-0.1216, risk:65, level:'high', types:'Theft', context:'Tourist area', area:0.08},
            {name:'Tottenham High Rd', lat:51.5883, lng:-0.0726, risk:62, level:'high', types:'Violence', context:'Town centre', area:0.16},
            {name:'Croydon Centre', lat:51.3762, lng:-0.0982, risk:58, level:'med', types:'ASB, Violence', context:'NTE', area:0.2}
        ],
        temporal: [98,62,38,42,72,88,105,98,115,138,165,185],
        kpis: {incidents:'892', hotspots:'18', officers:'445', accuracy:'74.9%'}
    },
    mers: {
        name: 'Merseyside', center: [53.41, -2.98], zoom: 12,
        hotspots: [
            {name:'Liverpool ONE', lat:53.4010, lng:-2.9874, risk:76, level:'high', types:'Shoplifting, ASB', context:'Retail zone', area:0.22},
            {name:'Concert Square', lat:53.4016, lng:-2.9812, risk:82, level:'crit', types:'Violence', context:'NTE', area:0.06},
            {name:'Lime Street Station', lat:53.4074, lng:-2.9778, risk:68, level:'high', types:'Theft, Drugs', context:'Transport', area:0.08},
            {name:'Birkenhead Centre', lat:53.3930, lng:-3.0147, risk:55, level:'med', types:'ASB', context:'Town centre', area:0.18}
        ],
        temporal: [72,38,22,25,48,65,78,72,88,112,148,165],
        kpis: {incidents:'324', hotspots:'8', officers:'178', accuracy:'79.2%'}
    },
    wyp: {
        name: 'West Yorkshire', center: [53.80, -1.55], zoom: 12,
        hotspots: [
            {name:'Leeds City Station', lat:53.7957, lng:-1.5477, risk:71, level:'high', types:'Drug offences', context:'Transit area', area:0.12},
            {name:'Bradford Centre', lat:53.7938, lng:-1.7518, risk:74, level:'high', types:'Violence, ASB', context:'Town centre', area:0.2},
            {name:'Call Lane / Calls', lat:53.7960, lng:-1.5390, risk:78, level:'high', types:'Violence', context:'NTE', area:0.08},
            {name:'Huddersfield Ring Rd', lat:53.6458, lng:-1.7850, risk:52, level:'med', types:'ASB', context:'Evening', area:0.22}
        ],
        temporal: [68,35,20,28,52,62,75,68,85,108,142,158],
        kpis: {incidents:'356', hotspots:'7', officers:'192', accuracy:'77.3%'}
    },
    swp: {
        name: 'South Wales', center: [51.48, -3.18], zoom: 12,
        hotspots: [
            {name:'Cardiff Bay', lat:51.4637, lng:-3.1639, risk:62, level:'high', types:'ASB', context:'Weekend evenings', area:0.25},
            {name:'St Mary Street', lat:51.4768, lng:-3.1778, risk:75, level:'high', types:'Violence', context:'NTE strip', area:0.1},
            {name:'Swansea Wind St', lat:51.6193, lng:-3.9420, risk:70, level:'high', types:'Violence, ASB', context:'NTE', area:0.08},
            {name:'Newport Centre', lat:51.5877, lng:-2.9984, risk:48, level:'med', types:'Shoplifting', context:'Retail', area:0.16}
        ],
        temporal: [58,30,18,22,45,55,68,62,78,95,125,142],
        kpis: {incidents:'278', hotspots:'6', officers:'148', accuracy:'76.8%'}
    }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PAGE NAVIGATION
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('pg-' + id).classList.add('active');
    document.querySelectorAll('.top-tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
    window.scrollTo({top: 0, behavior: 'smooth'});
    if (id === 'dashboard' && heroMapInstance) {
        setTimeout(() => heroMapInstance.invalidateSize(), 100);
    }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DASHBOARD TAB NAVIGATION
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
document.querySelectorAll('.d-tab').forEach(tab => {
    tab.addEventListener('click', () => {
        document.querySelectorAll('.d-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
        tab.classList.add('active');
        const panel = document.getElementById(tab.dataset.panel);
        panel.classList.add('active');
        if (tab.dataset.panel === 'hotspots' && mainMap) {
            setTimeout(() => mainMap.invalidateSize(), 100);
        }
    });
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   HERO MAP (National overview)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let heroMapInstance;
function initHeroMap() {
    heroMapInstance = L.map('heroMap', {
        center: [54.0, -2.5],
        zoom: 5.5,
        zoomControl: false,
        attributionControl: false,
        dragging: false,
        scrollWheelZoom: false
    });
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        maxZoom: 19
    }).addTo(heroMapInstance);
    FORCES.all.hotspots.forEach(h => {
        const color = h.level === 'crit' ? '#EF4444' : h.level === 'high' ? '#F97316' : h.level === 'med' ? '#EAB308' : '#22C55E';
        L.circle([h.lat, h.lng], {
            radius: h.risk * 40,
            color: color,
            fillColor: color,
            fillOpacity: 0.35,
            weight: 1.5
        }).addTo(heroMapInstance).bindTooltip(h.name + ' ‚Äî Risk: ' + h.risk);
    });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MAIN MAP (Hotspot analysis)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let mainMap, mainMapLayers = [];

function createHexagon(center, sizeKm) {
    const pts = [];
    for (let i = 0; i < 6; i++) {
        const angle = (60 * i - 30) * Math.PI / 180;
        const dlat = (sizeKm / 111.32) * Math.cos(angle);
        const dlng = (sizeKm / (111.32 * Math.cos(center[0] * Math.PI / 180))) * Math.sin(angle);
        pts.push([center[0] + dlat, center[1] + dlng]);
    }
    return pts;
}

function initMainMap() {
    mainMap = L.map('mainMap', {
        center: [53.0, -1.5],
        zoom: 6,
        attributionControl: false
    });
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        maxZoom: 19
    }).addTo(mainMap);
    renderHotspots('all', 'all');
}

function renderHotspots(forceKey, crimeFilter) {
    mainMapLayers.forEach(l => mainMap.removeLayer(l));
    mainMapLayers = [];

    const force = FORCES[forceKey] || FORCES.all;
    mainMap.setView(force.center, force.zoom);

    let hotspots = force.hotspots;
    if (crimeFilter !== 'all') {
        const filterMap = {
            violence: 'Violence', asb: 'ASB', burglary: 'Burglary',
            drugs: 'Drug', vehicle: 'Vehicle'
        };
        const term = filterMap[crimeFilter];
        if (term) hotspots = hotspots.filter(h => h.types.includes(term));
    }

    hotspots.forEach(h => {
        const color = h.level === 'crit' ? '#EF4444' : h.level === 'high' ? '#F97316' : h.level === 'med' ? '#EAB308' : '#22C55E';
        const fillOpacity = h.level === 'crit' ? 0.4 : h.level === 'high' ? 0.35 : 0.25;

        // Hexagon overlay
        const hexSize = Math.max(0.15, h.area * 0.8);
        const hexPts = createHexagon([h.lat, h.lng], hexSize);
        const hex = L.polygon(hexPts, {
            color: color,
            fillColor: color,
            fillOpacity: fillOpacity,
            weight: 2
        }).addTo(mainMap);
        hex.bindTooltip(`<strong>${h.name}</strong><br>Risk Score: ${h.risk}<br>${h.types}<br>${h.context}`, {sticky: true});
        mainMapLayers.push(hex);

        // Centre marker
        const marker = L.circleMarker([h.lat, h.lng], {
            radius: 6,
            color: '#fff',
            fillColor: color,
            fillOpacity: 1,
            weight: 2
        }).addTo(mainMap);
        mainMapLayers.push(marker);
    });

    // Update hotspot list
    renderHotspotList(hotspots, force.name);

    // Update title
    document.getElementById('mapTitle').textContent = forceKey === 'all' ? 'Interactive Hotspot Map' : force.name + ' ‚Äî Hotspot Map';
    document.getElementById('mapSub').textContent = hotspots.length + ' hotspots identified with geofenced hexagon grid';

    // Update KPIs
    document.getElementById('kpi-incidents').textContent = force.kpis.incidents;
    document.getElementById('kpi-hotspots').textContent = force.kpis.hotspots;
    document.getElementById('kpi-officers').textContent = force.kpis.officers;
    document.getElementById('kpi-accuracy').textContent = force.kpis.accuracy;

    // Update temporal chart
    if (temporalChartInstance) {
        temporalChartInstance.data.datasets[0].data = force.temporal;
        temporalChartInstance.update();
    }
}

function renderHotspotList(hotspots, forceName) {
    const list = document.getElementById('hsList');
    document.getElementById('hsListSub').textContent = forceName + ' ‚Äî ' + hotspots.length + ' hotspots';
    list.innerHTML = hotspots.sort((a, b) => b.risk - a.risk).map((h, i) =>
        `<div class="hs-item ${h.level}" onclick="mainMap.setView([${h.lat},${h.lng}],15)">
            <div class="hs-rank">${i + 1}</div>
            <div class="hs-info"><div class="hs-name">${h.name}</div><div class="hs-meta">${h.types} ¬∑ ${h.context}</div></div>
            <div class="hs-score"><div class="num">${h.risk}</div><div class="slbl">Risk</div></div>
        </div>`
    ).join('');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FILTER EVENT LISTENERS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
document.getElementById('filterForce').addEventListener('change', applyFilters);
document.getElementById('filterCrime').addEventListener('change', applyFilters);
document.getElementById('filterPeriod').addEventListener('change', applyFilters);

function applyFilters() {
    const forceKey = document.getElementById('filterForce').value;
    const crimeKey = document.getElementById('filterCrime').value;
    renderHotspots(forceKey, crimeKey);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CHARTS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
Chart.defaults.font.family = "'Outfit', sans-serif";
Chart.defaults.color = '#64748B';

let temporalChartInstance;

function initCharts() {
    // Crime Trends
    new Chart(document.getElementById('trendChart'), {
        type: 'line',
        data: {
            labels: ['Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','Jan'],
            datasets: [
                {label:'Violence',data:[420,380,410,450,520,580,620,590,510,480,440,460],borderColor:'#EF4444',backgroundColor:'rgba(239,68,68,.08)',tension:.4,fill:true},
                {label:'ASB',data:[680,620,590,640,720,850,920,880,760,690,610,650],borderColor:'#8B5CF6',backgroundColor:'rgba(139,92,246,.08)',tension:.4,fill:true},
                {label:'Burglary',data:[340,320,290,260,240,220,210,230,280,310,350,330],borderColor:'#F97316',backgroundColor:'rgba(249,115,22,.08)',tension:.4,fill:true}
            ]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true}}}
    });

    // Risk Doughnut
    new Chart(document.getElementById('riskChart'), {
        type: 'doughnut',
        data: {
            labels: ['Critical','High','Medium','Low'],
            datasets: [{data:[8,14,18,7],backgroundColor:['#EF4444','#F97316','#EAB308','#22C55E'],borderWidth:0}]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},cutout:'65%'}
    });

    // Temporal
    temporalChartInstance = new Chart(document.getElementById('temporalChart'), {
        type: 'bar',
        data: {
            labels: ['00:00','02:00','04:00','06:00','08:00','10:00','12:00','14:00','16:00','18:00','20:00','22:00'],
            datasets: [{
                label:'Incident Volume',
                data: FORCES.all.temporal,
                backgroundColor: ctx => {
                    const v = ctx.raw;
                    return v > 150 ? '#EF4444' : v > 100 ? '#F97316' : v > 70 ? '#EAB308' : '#22C55E';
                },
                borderRadius: 4
            }]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
    });

    // Forecast
    new Chart(document.getElementById('forecastChart'), {
        type: 'line',
        data: {
            labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun','Mon','Tue','Wed','Thu'],
            datasets: [
                {label:'Actual',data:[720,685,742,798,1089,1245,912,null,null,null,null],borderColor:'#2563EB',backgroundColor:'rgba(37,99,235,.08)',tension:.4,fill:true},
                {label:'Predicted',data:[null,null,null,847,1124,1289,923,712,698,756,802],borderColor:'#0D9488',borderDash:[5,5],tension:.4}
            ]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true}}}
    });

    // Category Forecast
    new Chart(document.getElementById('categoryChart'), {
        type: 'bar',
        data: {
            labels: ['Violence','ASB','Burglary','Vehicle','Drugs','Theft'],
            datasets: [
                {label:'Current Week',data:[245,412,156,89,78,234],backgroundColor:'#2563EB',borderRadius:4},
                {label:'Predicted Next',data:[268,389,142,95,72,256],backgroundColor:'#0D9488',borderRadius:4}
            ]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true}}}
    });

    // Shift Coverage
    new Chart(document.getElementById('shiftChart'), {
        type: 'line',
        data: {
            labels: ['06:00','08:00','10:00','12:00','14:00','16:00','18:00','20:00','22:00','00:00','02:00','04:00'],
            datasets: [
                {label:'Predicted Demand',data:[35,62,78,95,88,102,124,156,178,145,85,42],borderColor:'#EF4444',tension:.4},
                {label:'Staffing Level',data:[45,85,95,100,100,95,110,140,165,130,75,45],borderColor:'#22C55E',tension:.4}
            ]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{y:{beginAtZero:true}}}
    });

    // Efficiency Radar
    new Chart(document.getElementById('effChart'), {
        type: 'radar',
        data: {
            labels: ['Response Time','Coverage','Utilisation','Patrol Compliance','Cost Efficiency','Outcomes'],
            datasets: [
                {label:'Current',data:[85,92,94,98,88,82],backgroundColor:'rgba(37,99,235,.15)',borderColor:'#2563EB',pointBackgroundColor:'#2563EB'},
                {label:'Target',data:[90,95,95,98,90,88],backgroundColor:'rgba(13,148,136,.15)',borderColor:'#0D9488',pointBackgroundColor:'#0D9488'}
            ]
        },
        options: {responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}},scales:{r:{beginAtZero:true,max:100}}}
    });
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   INIT
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
document.addEventListener('DOMContentLoaded', () => {
    initHeroMap();
    initMainMap();
    initCharts();
});
</script>
</body>
</html>
